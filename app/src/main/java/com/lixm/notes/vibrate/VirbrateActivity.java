package com.lixm.notes.vibrate;import android.annotation.SuppressLint;import android.content.Context;import android.os.Bundle;import android.os.PowerManager;import android.util.Log;import android.view.View;import android.widget.Button;import android.widget.Toast;import androidx.annotation.Nullable;import androidx.appcompat.app.AppCompatActivity;import com.lixm.notes.R;public class VirbrateActivity extends AppCompatActivity {    private Button btn;    @Override    protected void onCreate(@Nullable Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_virbrate);//        vibrateLongLight(true);        btn = findViewById(R.id.btn);        btn.postDelayed(new Runnable() {            @Override            public void run() {                wakeUpAndUnlock(VirbrateActivity.this);                Log.d("xxxx","run");            }        },3000);    }    public void toastTest(View view) {        Toast.makeText(this,"toastTest",Toast.LENGTH_LONG).show();        vibrateLongLight(false);    }    public void vibrateLongLight(boolean isVibrateLongLight){        Toast.makeText(this,"isVibrateLongLight:"+isVibrateLongLight,Toast.LENGTH_LONG).show();        if(isVibrateLongLight) {            VibrateUtil.virateCancle(this);            VibrateUtil.vibrate(this,  new long[]{1000, 1000, 1000, 1000},-1);        }else {            VibrateUtil.virateCancle(this);        }        LongLightUtils.keepScreenLongLight(this,isVibrateLongLight);    }    @SuppressLint("InvalidWakeLockTag")    public static void wakeUpAndUnlock(Context context){        try {            //获取电源管理器对象            PowerManager pm=(PowerManager) context.getSystemService(Context.POWER_SERVICE);            Log.d("xxxx","isScreenOn:"+pm.isScreenOn());            if(!pm.isScreenOn()){//不是亮屏                //获取PowerManager.WakeLock对象,后面的参数|表示同时传入两个值,最后的是LogCat里用的Tag                PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.SCREEN_DIM_WAKE_LOCK,"bright");                //点亮屏幕                wl.acquire();                //释放                wl.release();            }            Log.d("xxxx","wakeUpAndUnlock");        }catch (Exception e){            Log.d("xxxx","Exception:"+e.toString());        }    }}